# 堆栈和函数

## 堆栈

栈：是一个很重要的数据结构，特征：后进先出

- 堆栈是一块内存区域；
- 栈顶指针是在 `ss:esp` 寄存器中，栈底是在高地址，向下增长
- `push` 入栈
- `pop` 出栈
- `pusha` 将 8 个基础寄存器压入栈中
- `popa` 将 7 个基础寄存器弹出，与 `pusha` 相对，会忽略 esp（不会将栈中esp的值给真正的寄存器esp）

**注意**：在nasm版本为2.14的情况下，`nasm -g`改为`nasm -gdwarf`就可以正常调试了。

- `call`: 会将 `call` 返回的下一条指令地址压入栈中
- `ret`: 将栈顶弹出到 eip
- `call` 和 `ret` 无关
